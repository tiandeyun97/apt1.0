# 广告投放管理平台

## 项目介绍

广告投放管理平台是一个基于Django开发的综合性广告管理系统，专为广告优化团队设计。本系统集成了项目管理、任务跟踪、消耗统计、数据分析等多项功能，帮助广告投放团队高效管理日常工作。

### 核心功能

- **公司与组织架构管理**：多公司支持，部门划分，用户权限管理
- **项目与任务管理**：项目创建、任务分配，状态跟踪，进度监控
- **广告消耗记录**：记录每日广告投放消耗、回流数据、效果指标
- **数据分析与报表**：消耗数据统计分析、效果指标追踪、自动化报表
- **像素管理**：广告像素代码管理与追踪
- **账户消耗管理**：广告账户余额、消耗追踪

### 应用模块详情

#### 组织架构管理（organize）

组织架构管理模块是系统的基础模块，负责管理公司、部门和用户的结构关系。

- **公司管理**：创建和管理多个公司实体，设置公司基本信息
- **部门管理**：在公司内部创建部门结构，支持多级部门层次
- **用户管理**：基于Django的用户管理系统扩展，支持公司和部门关联
- **权限管理**：细粒度的权限控制，可按公司、部门、角色设置不同权限

用户模型继承自Django的AbstractUser，增加了公司关联，实现了多公司隔离的用户管理体系。

#### 任务管理（task_management）

任务管理模块是系统的核心业务模块，用于管理广告投放任务的全生命周期。

- **任务创建**：创建新的广告投放任务，设置基本信息和投放参数
- **任务分配**：将任务分配给优化师，支持多人协作
- **任务状态跟踪**：实时跟踪任务的状态变化，提供完整的状态流转记录
- **任务详情查看**：查看任务的详细信息，包括消耗数据、投放效果等
- **任务搜索与筛选**：多条件组合查询，快速定位任务

每个任务关联到具体项目，记录了广告投放的详细信息，包括投放链接、像素代码等。

#### 项目与任务基础（tasks）

该模块提供了项目和任务的基础数据模型和业务逻辑。

- **项目管理**：创建和管理广告项目，设置项目基本信息和KPI
- **任务类型管理**：定义不同类型的任务，便于分类管理
- **媒体渠道管理**：管理不同的广告投放媒体渠道
- **任务状态管理**：定义任务状态流转的各个阶段

项目模型与任务模型紧密关联，一个项目下可包含多个任务，形成层级结构。

#### 消耗管理（consumption_management）

消耗管理模块专注于记录和管理广告投放的消耗数据。

- **消耗记录**：记录每日广告投放的消耗金额和效果数据
- **回流处理**：支持录入退款和回流数据，自动计算实际消耗
- **数据导入导出**：支持Excel批量导入消耗记录和导出报表
- **消耗统计**：按不同维度（日期、项目、任务等）统计消耗数据
- **效果指标计算**：自动计算转化率、成本等关键指标

系统支持通过表格形式查看消耗明细，并可进行在线编辑、批量导入等操作。

#### 像素管理（pixel_management）

像素管理模块用于管理广告投放中使用的各类像素代码。

- **像素代码管理**：创建、存储和管理不同类型的像素代码
- **像素分类**：按用途分类管理像素代码（展示、点击、转化等）
- **像素分配**：将像素代码分配给特定任务
- **像素效果追踪**：记录和分析像素触发数据

像素代码是广告效果跟踪的重要工具，该模块提供了完整的像素代码生命周期管理。

#### 日报管理（daily_report_management）

日报管理模块负责自动化生成和管理每日广告投放报表。

- **日报模板**：定制不同类型的日报模板
- **日报生成**：基于消耗数据自动生成日报
- **日报分发**：通过邮件或其他渠道分发日报
- **历史日报查询**：存储和查询历史日报数据

日报是团队日常工作汇总的重要工具，该模块大幅简化了日报生成流程。

#### 数据分析（data_analysis）

数据分析模块提供深入的数据分析和可视化功能。

- **趋势分析**：分析消耗、转化等指标的时间趋势
- **对比分析**：不同项目、任务、优化师的效果对比
- **图表可视化**：通过各类图表直观展示数据
- **指标钻取**：从宏观到微观多层次分析数据
- **自定义报表**：根据需求定制专用分析报表

该模块为管理决策提供数据支持，帮助团队优化广告投放策略。

#### 账户消耗管理（account_consumption）

账户消耗管理模块跟踪和管理广告账户的余额和消耗情况。

- **账户管理**：记录各广告平台的账户信息
- **充值记录**：跟踪账户充值历史
- **消耗预警**：设置余额预警阈值，自动提醒
- **账户报表**：生成账户财务报表
- **账户分配**：管理账户与项目任务的关联关系

该模块帮助财务和运营团队控制广告投放预算，提高资金使用效率。

#### 工具集（tools）

工具集模块提供了各种辅助工具，提升系统使用效率。

- **数据导入工具**：批量导入各类数据
- **文件处理工具**：处理Excel、CSV等格式文件
- **通知系统**：站内通知、邮件通知等
- **数据校验工具**：验证导入数据的有效性
- **导出工具**：将系统数据导出为各种格式

这些工具提高了系统的易用性和工作效率，是各个模块的有力补充。

## 安装部署指南

### 系统要求

- Python 3.8+
- PostgreSQL 12+
- 现代化Web浏览器

### 安装步骤

1. 克隆仓库
```bash
git clone https://github.com/your-organization/ad-management-platform.git
cd ad-management-platform
```

2. 创建并激活虚拟环境
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/MacOS
source venv/bin/activate
```

3. 安装依赖
```bash
pip install -r requirements.txt
```

4. 配置数据库
   - 创建PostgreSQL数据库
   - 在`ad_manplat/settings.py`中修改数据库配置

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'your_db_name',
        'USER': 'your_db_user',
        'PASSWORD': 'your_password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

5. 执行数据库迁移
```bash
python manage.py migrate
```

6. 创建超级用户
```bash
python manage.py createsuperuser
```

7. 收集静态文件
```bash
python manage.py collectstatic
```

8. 运行开发服务器
```bash
python manage.py runserver
```

### 生产环境部署

对于生产环境，推荐使用以下配置：

- Nginx 作为反向代理服务器
- Gunicorn 作为WSGI应用服务器
- Supervisor 进行进程管理
- PostgreSQL 作为数据库服务器

详细配置步骤请参考[部署文档](deployment.md)。

## API文档

系统提供RESTful API，用于与其他系统集成。

### 消耗记录API

#### 获取消耗记录列表

- **URL**: `/api/consumption/`
- **方法**: `GET`
- **权限**: 需要认证
- **查询参数**:
  - `start_date`: 开始日期(YYYY-MM-DD)
  - `end_date`: 结束日期(YYYY-MM-DD)
  - `task_id`: 任务ID
  - `project_id`: 项目ID

#### 创建新消耗记录

- **URL**: `/api/consumption/`
- **方法**: `POST`
- **权限**: 需要认证
- **请求体**:
```json
{
  "task_id": "UUID格式的任务ID",
  "date": "YYYY-MM-DD",
  "daily_consumption": 100.00,
  "return_flow": 0.00,
  "registrations": 50,
  "first_deposits": 10,
  "impressions": 10000,
  "clicks": 500
}
```

### 更多API文档

完整的API文档请访问系统中的 `/api/docs/` 路径。

## 使用示例

### 创建任务和记录消耗

1. 登录系统后，进入"任务管理"模块
2. 点击"创建新任务"，填写任务详细信息
3. 在任务详情页面，点击"添加消耗记录"
4. 填写日期、消耗金额、各项指标数据并提交
5. 在消耗列表可以查看所有记录，并可通过回流编辑功能调整数据

### 生成数据报表

1. 进入"数据分析"模块
2. 选择项目、日期范围和需要的指标
3. 点击"生成报表"
4. 可选择导出为Excel或PDF格式

### 设置和自定义

1. 进入"系统设置"
2. 根据需要配置公司、部门、用户等信息
3. 设置权限和访问控制
4. 自定义项目类型、任务状态等选项

## 贡献指南

欢迎提交问题报告和功能请求。如需贡献代码，请遵循以下步骤：

1. Fork本仓库
2. 创建功能分支 (`git checkout -b feature/amazing-feature`)
3. 提交更改 (`git commit -m 'Add some amazing feature'`)
4. 推送到分支 (`git push origin feature/amazing-feature`)
5. 创建Pull Request

## 许可证

本项目采用[MIT许可证](LICENSE)。

## 联系方式

如有问题，请联系系统管理员或开发团队。 